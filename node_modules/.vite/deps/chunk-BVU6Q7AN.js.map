{
  "version": 3,
  "sources": ["../../ol/ImageState.js", "../../ol/has.js", "../../ol/Image.js", "../../ol/dom.js", "../../ol/color.js", "../../ol/size.js"],
  "sourcesContent": ["/**\r\n * @module ol/ImageState\r\n */\r\n\r\n/**\r\n * @enum {number}\r\n */\r\nexport default {\r\n  IDLE: 0,\r\n  LOADING: 1,\r\n  LOADED: 2,\r\n  ERROR: 3,\r\n  EMPTY: 4,\r\n};\r\n", "/**\r\n * @module ol/has\r\n */\r\n\r\nconst ua =\r\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\r\n    ? navigator.userAgent.toLowerCase()\r\n    : '';\r\n\r\n/**\r\n * User agent string says we are dealing with Safari as browser.\r\n * @type {boolean}\r\n */\r\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\r\n\r\n/**\r\n * https://bugs.webkit.org/show_bug.cgi?id=237906\r\n * @type {boolean}\r\n */\r\nexport const SAFARI_BUG_237906 =\r\n  SAFARI &&\r\n  (ua.includes('version/15.4') ||\r\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\r\n\r\n/**\r\n * User agent string says we are dealing with a WebKit engine.\r\n * @type {boolean}\r\n */\r\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\r\n\r\n/**\r\n * User agent string says we are dealing with a Mac as platform.\r\n * @type {boolean}\r\n */\r\nexport const MAC = ua.includes('macintosh');\r\n\r\n/**\r\n * The ratio between physical pixels and device-independent pixels\r\n * (dips) on the device (`window.devicePixelRatio`).\r\n * @const\r\n * @type {number}\r\n * @api\r\n */\r\nexport const DEVICE_PIXEL_RATIO =\r\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\r\n\r\n/**\r\n * The execution context is a worker with OffscreenCanvas available.\r\n * @const\r\n * @type {boolean}\r\n */\r\nexport const WORKER_OFFSCREEN_CANVAS =\r\n  typeof WorkerGlobalScope !== 'undefined' &&\r\n  typeof OffscreenCanvas !== 'undefined' &&\r\n  self instanceof WorkerGlobalScope; //eslint-disable-line\r\n\r\n/**\r\n * Image.prototype.decode() is supported.\r\n * @type {boolean}\r\n */\r\nexport const IMAGE_DECODE =\r\n  typeof Image !== 'undefined' && Image.prototype.decode;\r\n\r\n/**\r\n * createImageBitmap() is supported.\r\n * @type {boolean}\r\n */\r\nexport const CREATE_IMAGE_BITMAP = typeof createImageBitmap === 'function';\r\n\r\n/**\r\n * @type {boolean}\r\n */\r\nexport const PASSIVE_EVENT_LISTENERS = (function () {\r\n  let passive = false;\r\n  try {\r\n    const options = Object.defineProperty({}, 'passive', {\r\n      get: function () {\r\n        passive = true;\r\n      },\r\n    });\r\n\r\n    // @ts-ignore Ignore invalid event type '_'\r\n    window.addEventListener('_', null, options);\r\n    // @ts-ignore Ignore invalid event type '_'\r\n    window.removeEventListener('_', null, options);\r\n  } catch {\r\n    // passive not supported\r\n  }\r\n  return passive;\r\n})();\r\n", "/**\r\n * @module ol/Image\r\n */\r\nimport ImageState from './ImageState.js';\r\nimport EventType from './events/EventType.js';\r\nimport EventTarget from './events/Target.js';\r\nimport {listenOnce, unlistenByKey} from './events.js';\r\nimport {toPromise} from './functions.js';\r\nimport {CREATE_IMAGE_BITMAP, IMAGE_DECODE} from './has.js';\r\n\r\n/**\r\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\r\n * `{string}` for the src as arguments. It is supposed to make it so the\r\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\r\n * content specified by the src. If not specified, the default is\r\n *\r\n *     function(image, src) {\r\n *       image.getImage().src = src;\r\n *     }\r\n *\r\n * Providing a custom `imageLoadFunction` can be useful to load images with\r\n * post requests or - in general - through XHR requests, where the src of the\r\n * image element would be set to a data URI when the content is loaded.\r\n *\r\n * @typedef {function(import(\"./Image.js\").default, string): void} LoadFunction\r\n * @api\r\n */\r\n\r\n/**\r\n * @typedef {Object} ImageObject\r\n * @property {import(\"./extent.js\").Extent} [extent] Extent, if different from the requested one.\r\n * @property {import(\"./resolution.js\").ResolutionLike} [resolution] Resolution, if different from the requested one.\r\n * When x and y resolution are different, use the array type (`[xResolution, yResolution]`).\r\n * @property {number} [pixelRatio] Pixel ratio, if different from the requested one.\r\n * @property {import('./DataTile.js').ImageLike} image Image.\r\n */\r\n\r\n/**\r\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\r\n * For images that cover any extent and resolution (static images), the loader function should not accept\r\n * any arguments. The function returns an {@link import(\"./DataTile.js\").ImageLike image}, an\r\n * {@link import(\"./Image.js\").ImageObject image object}, or a promise for the same.\r\n * For loaders that generate images, the promise should not resolve until the image is loaded.\r\n * If the returned image does not match the extent, resolution or pixel ratio passed to the loader,\r\n * it has to return an {@link import(\"./Image.js\").ImageObject image object} with the `image` and the\r\n * correct `extent`, `resolution` and `pixelRatio`.\r\n *\r\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): import(\"./DataTile.js\").ImageLike|ImageObject|Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} Loader\r\n * @api\r\n */\r\n\r\n/**\r\n * Loader function used for image sources. Receives extent, resolution and pixel ratio as arguments.\r\n * The function returns a promise for an  {@link import(\"./Image.js\").ImageObject image object}.\r\n *\r\n * @typedef {function(import(\"./extent.js\").Extent, number, number, (function(HTMLImageElement, string): void)=): Promise<import(\"./DataTile.js\").ImageLike|ImageObject>} ImageObjectPromiseLoader\r\n */\r\n\r\nclass ImageWrapper extends EventTarget {\r\n  /**\r\n   * @param {import(\"./extent.js\").Extent} extent Extent.\r\n   * @param {number|Array<number>|undefined} resolution Resolution. If provided as array, x and y\r\n   * resolution will be assumed.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {import(\"./ImageState.js\").default|Loader} stateOrLoader State.\r\n   */\r\n  constructor(extent, resolution, pixelRatio, stateOrLoader) {\r\n    super();\r\n\r\n    /**\r\n     * @protected\r\n     * @type {import(\"./extent.js\").Extent}\r\n     */\r\n    this.extent = extent;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.pixelRatio_ = pixelRatio;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {number|Array<number>|undefined}\r\n     */\r\n    this.resolution = resolution;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {import(\"./ImageState.js\").default}\r\n     */\r\n    this.state =\r\n      typeof stateOrLoader === 'function' ? ImageState.IDLE : stateOrLoader;\r\n\r\n    /**\r\n     * @private\r\n     * @type {import('./DataTile.js').ImageLike|null}\r\n     */\r\n    this.image_ = null;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {Loader|null}\r\n     */\r\n    this.loader = typeof stateOrLoader === 'function' ? stateOrLoader : null;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  changed() {\r\n    this.dispatchEvent(EventType.CHANGE);\r\n  }\r\n\r\n  /**\r\n   * @return {import(\"./extent.js\").Extent} Extent.\r\n   */\r\n  getExtent() {\r\n    return this.extent;\r\n  }\r\n\r\n  /**\r\n   * @return {import('./DataTile.js').ImageLike} Image.\r\n   */\r\n  getImage() {\r\n    return this.image_;\r\n  }\r\n\r\n  /**\r\n   * @return {number} PixelRatio.\r\n   */\r\n  getPixelRatio() {\r\n    return this.pixelRatio_;\r\n  }\r\n\r\n  /**\r\n   * @return {number|Array<number>} Resolution.\r\n   */\r\n  getResolution() {\r\n    return /** @type {number} */ (this.resolution);\r\n  }\r\n\r\n  /**\r\n   * @return {import(\"./ImageState.js\").default} State.\r\n   */\r\n  getState() {\r\n    return this.state;\r\n  }\r\n\r\n  /**\r\n   * Load not yet loaded URI.\r\n   */\r\n  load() {\r\n    if (this.state == ImageState.IDLE) {\r\n      if (this.loader) {\r\n        this.state = ImageState.LOADING;\r\n        this.changed();\r\n        const resolution = this.getResolution();\r\n        const requestResolution = Array.isArray(resolution)\r\n          ? resolution[0]\r\n          : resolution;\r\n        toPromise(() =>\r\n          this.loader(\r\n            this.getExtent(),\r\n            requestResolution,\r\n            this.getPixelRatio(),\r\n          ),\r\n        )\r\n          .then((image) => {\r\n            if ('image' in image) {\r\n              this.image_ = image.image;\r\n            }\r\n            if ('extent' in image) {\r\n              this.extent = image.extent;\r\n            }\r\n            if ('resolution' in image) {\r\n              this.resolution = image.resolution;\r\n            }\r\n            if ('pixelRatio' in image) {\r\n              this.pixelRatio_ = image.pixelRatio;\r\n            }\r\n            if (\r\n              image instanceof HTMLImageElement ||\r\n              (CREATE_IMAGE_BITMAP && image instanceof ImageBitmap) ||\r\n              image instanceof HTMLCanvasElement ||\r\n              image instanceof HTMLVideoElement\r\n            ) {\r\n              this.image_ = image;\r\n            }\r\n            this.state = ImageState.LOADED;\r\n          })\r\n          .catch((error) => {\r\n            this.state = ImageState.ERROR;\r\n            console.error(error); // eslint-disable-line no-console\r\n          })\r\n          .finally(() => this.changed());\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {import('./DataTile.js').ImageLike} image The image.\r\n   */\r\n  setImage(image) {\r\n    this.image_ = image;\r\n  }\r\n\r\n  /**\r\n   * @param {number|Array<number>} resolution Resolution.\r\n   */\r\n  setResolution(resolution) {\r\n    this.resolution = resolution;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {import('./DataTile.js').ImageLike} image Image element.\r\n * @param {function():any} loadHandler Load callback function.\r\n * @param {function():any} errorHandler Error callback function.\r\n * @return {function():void} Callback to stop listening.\r\n */\r\nexport function listenImage(image, loadHandler, errorHandler) {\r\n  const img = /** @type {HTMLImageElement} */ (image);\r\n  let listening = true;\r\n  let decoding = false;\r\n  let loaded = false;\r\n\r\n  const listenerKeys = [\r\n    listenOnce(img, EventType.LOAD, function () {\r\n      loaded = true;\r\n      if (!decoding) {\r\n        loadHandler();\r\n      }\r\n    }),\r\n  ];\r\n\r\n  if (img.src && IMAGE_DECODE) {\r\n    decoding = true;\r\n    img\r\n      .decode()\r\n      .then(function () {\r\n        if (listening) {\r\n          loadHandler();\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        if (listening) {\r\n          if (loaded) {\r\n            loadHandler();\r\n          } else {\r\n            errorHandler();\r\n          }\r\n        }\r\n      });\r\n  } else {\r\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\r\n  }\r\n\r\n  return function unlisten() {\r\n    listening = false;\r\n    listenerKeys.forEach(unlistenByKey);\r\n  };\r\n}\r\n\r\n/**\r\n * Loads an image.\r\n * @param {HTMLImageElement} image Image, not yet loaded.\r\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\r\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\r\n * @api\r\n */\r\nexport function load(image, src) {\r\n  return new Promise((resolve, reject) => {\r\n    function handleLoad() {\r\n      unlisten();\r\n      resolve(image);\r\n    }\r\n    function handleError() {\r\n      unlisten();\r\n      reject(new Error('Image load error'));\r\n    }\r\n    function unlisten() {\r\n      image.removeEventListener('load', handleLoad);\r\n      image.removeEventListener('error', handleError);\r\n    }\r\n    image.addEventListener('load', handleLoad);\r\n    image.addEventListener('error', handleError);\r\n    if (src) {\r\n      image.src = src;\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * @param {HTMLImageElement} image Image, not yet loaded.\r\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\r\n * @return {Promise<HTMLImageElement>} Promise resolving to an `HTMLImageElement`.\r\n */\r\nexport function decodeFallback(image, src) {\r\n  if (src) {\r\n    image.src = src;\r\n  }\r\n  return image.src && IMAGE_DECODE\r\n    ? new Promise((resolve, reject) =>\r\n        image\r\n          .decode()\r\n          .then(() => resolve(image))\r\n          .catch((e) =>\r\n            image.complete && image.width ? resolve(image) : reject(e),\r\n          ),\r\n      )\r\n    : load(image);\r\n}\r\n\r\n/**\r\n * Loads an image and decodes it to an `ImageBitmap` if `createImageBitmap()` is supported. Returns\r\n * the loaded image otherwise.\r\n * @param {HTMLImageElement} image Image, not yet loaded.\r\n * @param {string} [src] `src` attribute of the image. Optional, not required if already present.\r\n * @return {Promise<ImageBitmap|HTMLImageElement>} Promise resolving to an `ImageBitmap` or an\r\n * `HTMLImageElement` if `createImageBitmap()` is not supported.\r\n * @api\r\n */\r\nexport function decode(image, src) {\r\n  if (src) {\r\n    image.src = src;\r\n  }\r\n  return image.src && IMAGE_DECODE && CREATE_IMAGE_BITMAP\r\n    ? image\r\n        .decode()\r\n        .then(() => createImageBitmap(image))\r\n        .catch((e) => {\r\n          if (image.complete && image.width) {\r\n            return image;\r\n          }\r\n          throw e;\r\n        })\r\n    : decodeFallback(image);\r\n}\r\n\r\nexport default ImageWrapper;\r\n", "import {WORKER_OFFSCREEN_CANVAS} from './has.js';\r\n\r\n/**\r\n * @module ol/dom\r\n */\r\n\r\n/**\r\n * @typedef {Object} ImageAttributes\r\n * @property {string|null} [crossOrigin] Cross origin.\r\n * @property {ReferrerPolicy} [referrerPolicy]  Referrer policy.\r\n */\r\n\r\n//FIXME Move this function to the canvas module\r\n/**\r\n * Create an html canvas element and returns its 2d context.\r\n * @param {number} [width] Canvas width.\r\n * @param {number} [height] Canvas height.\r\n * @param {Array<HTMLCanvasElement|OffscreenCanvas>} [canvasPool] Canvas pool to take existing canvas from.\r\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\r\n * @return {CanvasRenderingContext2D|OffscreenCanvasRenderingContext2D} The context.\r\n */\r\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\r\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\r\n  let canvas;\r\n  if (canvasPool && canvasPool.length) {\r\n    canvas = /** @type {HTMLCanvasElement} */ (canvasPool.shift());\r\n  } else if (WORKER_OFFSCREEN_CANVAS) {\r\n    canvas = new (class extends OffscreenCanvas {\r\n      style = {};\r\n    })(width ?? 300, height ?? 150);\r\n  } else {\r\n    canvas = document.createElement('canvas');\r\n  }\r\n  if (width) {\r\n    canvas.width = width;\r\n  }\r\n  if (height) {\r\n    canvas.height = height;\r\n  }\r\n  return /** @type {CanvasRenderingContext2D|OffscreenCanvasRenderingContext2D} */ (\r\n    canvas.getContext('2d', settings)\r\n  );\r\n}\r\n\r\n/**\r\n * @type {CanvasRenderingContext2D|OffscreenCanvasRenderingContext2D}\r\n */\r\nlet sharedCanvasContext;\r\n\r\n/**\r\n * @return {CanvasRenderingContext2D|OffscreenCanvasRenderingContext2D} Shared canvas context.\r\n */\r\nexport function getSharedCanvasContext2D() {\r\n  if (!sharedCanvasContext) {\r\n    sharedCanvasContext = createCanvasContext2D(1, 1);\r\n  }\r\n  return sharedCanvasContext;\r\n}\r\n\r\n/**\r\n * Releases canvas memory to avoid exceeding memory limits in Safari.\r\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\r\n * @param {CanvasRenderingContext2D|OffscreenCanvasRenderingContext2D} context Context.\r\n */\r\nexport function releaseCanvas(context) {\r\n  const canvas = context.canvas;\r\n  canvas.width = 1;\r\n  canvas.height = 1;\r\n  context.clearRect(0, 0, 1, 1);\r\n}\r\n\r\n/**\r\n * Get the current computed width for the given element including margin,\r\n * padding and border.\r\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\r\n * @param {!HTMLElement} element Element.\r\n * @return {number} The width.\r\n */\r\nexport function outerWidth(element) {\r\n  let width = element.offsetWidth;\r\n  const style = getComputedStyle(element);\r\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\r\n\r\n  return width;\r\n}\r\n\r\n/**\r\n * Get the current computed height for the given element including margin,\r\n * padding and border.\r\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\r\n * @param {!HTMLElement} element Element.\r\n * @return {number} The height.\r\n */\r\nexport function outerHeight(element) {\r\n  let height = element.offsetHeight;\r\n  const style = getComputedStyle(element);\r\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\r\n\r\n  return height;\r\n}\r\n\r\n/**\r\n * @param {Node} newNode Node to replace old node\r\n * @param {Node} oldNode The node to be replaced\r\n */\r\nexport function replaceNode(newNode, oldNode) {\r\n  const parent = oldNode.parentNode;\r\n  if (parent) {\r\n    parent.replaceChild(newNode, oldNode);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Node} node The node to remove the children from.\r\n */\r\nexport function removeChildren(node) {\r\n  while (node.lastChild) {\r\n    node.lastChild.remove();\r\n  }\r\n}\r\n\r\n/**\r\n * Transform the children of a parent node so they match the\r\n * provided list of children.  This function aims to efficiently\r\n * remove, add, and reorder child nodes while maintaining a simple\r\n * implementation (it is not guaranteed to minimize DOM operations).\r\n * @param {Node} node The parent node whose children need reworking.\r\n * @param {Array<Node>} children The desired children.\r\n */\r\nexport function replaceChildren(node, children) {\r\n  const oldChildren = node.childNodes;\r\n\r\n  for (let i = 0; true; ++i) {\r\n    const oldChild = oldChildren[i];\r\n    const newChild = children[i];\r\n\r\n    // check if our work is done\r\n    if (!oldChild && !newChild) {\r\n      break;\r\n    }\r\n\r\n    // check if children match\r\n    if (oldChild === newChild) {\r\n      continue;\r\n    }\r\n\r\n    // check if a new child needs to be added\r\n    if (!oldChild) {\r\n      node.appendChild(newChild);\r\n      continue;\r\n    }\r\n\r\n    // check if an old child needs to be removed\r\n    if (!newChild) {\r\n      node.removeChild(oldChild);\r\n      --i;\r\n      continue;\r\n    }\r\n\r\n    // reorder\r\n    node.insertBefore(newChild, oldChild);\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a minimal structure that mocks a DIV to be used by the composite and\r\n * layer renderer in a worker environment\r\n * @return {HTMLDivElement} mocked DIV\r\n */\r\nexport function createMockDiv() {\r\n  const mockedDiv = new Proxy(\r\n    {\r\n      /**\r\n       * @type {Array<HTMLElement>}\r\n       */\r\n      childNodes: [],\r\n      /**\r\n       * @param {HTMLElement} node html node.\r\n       * @return {HTMLElement} html node.\r\n       */\r\n      appendChild: function (node) {\r\n        this.childNodes.push(node);\r\n        return node;\r\n      },\r\n      /**\r\n       * dummy function, as this structure is not supposed to have a parent.\r\n       */\r\n      remove: function () {},\r\n      /**\r\n       * @param {HTMLElement} node html node.\r\n       * @return {HTMLElement} html node.\r\n       */\r\n      removeChild: function (node) {\r\n        const index = this.childNodes.indexOf(node);\r\n        if (index === -1) {\r\n          throw new Error('Node to remove was not found');\r\n        }\r\n        this.childNodes.splice(index, 1);\r\n        return node;\r\n      },\r\n      /**\r\n       * @param {HTMLElement} newNode new html node.\r\n       * @param {HTMLElement} referenceNode reference html node.\r\n       * @return {HTMLElement} new html node.\r\n       */\r\n      insertBefore: function (newNode, referenceNode) {\r\n        const index = this.childNodes.indexOf(referenceNode);\r\n        if (index === -1) {\r\n          throw new Error('Reference node not found');\r\n        }\r\n        this.childNodes.splice(index, 0, newNode);\r\n        return newNode;\r\n      },\r\n      style: {},\r\n    },\r\n    {\r\n      get(target, prop, receiver) {\r\n        if (prop === 'firstElementChild') {\r\n          return target.childNodes.length > 0 ? target.childNodes[0] : null;\r\n        }\r\n        return Reflect.get(target, prop, receiver);\r\n      },\r\n    },\r\n  );\r\n  return /** @type {HTMLDivElement} */ (/** @type {*} */ (mockedDiv));\r\n}\r\n\r\n/***\r\n * @param {*} obj The object to check.\r\n * @return {obj is (HTMLCanvasElement | OffscreenCanvas)} The object is a canvas.\r\n */\r\nexport function isCanvas(obj) {\r\n  return (\r\n    (typeof HTMLCanvasElement !== 'undefined' &&\r\n      obj instanceof HTMLCanvasElement) ||\r\n    (typeof OffscreenCanvas !== 'undefined' && obj instanceof OffscreenCanvas)\r\n  );\r\n}\r\n", "/**\r\n * @module ol/color\r\n */\r\nimport {createCanvasContext2D} from './dom.js';\r\nimport {clamp, toFixed} from './math.js';\r\n\r\n/**\r\n * A color represented as a short array [red, green, blue, alpha].\r\n * red, green, and blue should be integers in the range 0..255 inclusive.\r\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\r\n * given then `1` will be used.\r\n * @typedef {Array<number>} Color\r\n * @api\r\n */\r\n\r\n/**\r\n * Color to indicate that no color should be rendered. This is meant to be used for per-reference\r\n * comparisons only.\r\n * @type {Color}\r\n */\r\nexport const NO_COLOR = [NaN, NaN, NaN, 0];\r\n\r\nlet colorParseContext;\r\n/**\r\n * @return {CanvasRenderingContext2D} The color parse context\r\n */\r\nfunction getColorParseContext() {\r\n  if (!colorParseContext) {\r\n    colorParseContext = createCanvasContext2D(1, 1, undefined, {\r\n      willReadFrequently: true,\r\n      desynchronized: true,\r\n    });\r\n  }\r\n  return colorParseContext;\r\n}\r\n\r\nconst rgbModernRegEx =\r\n  /^rgba?\\(\\s*(\\d+%?)\\s+(\\d+%?)\\s+(\\d+%?)(?:\\s*\\/\\s*(\\d+%|\\d*\\.\\d+|[01]))?\\s*\\)$/i;\r\nconst rgbLegacyAbsoluteRegEx =\r\n  /^rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)(?:\\s*,\\s*(\\d+%|\\d*\\.\\d+|[01]))?\\s*\\)$/i;\r\nconst rgbLegacyPercentageRegEx =\r\n  /^rgba?\\(\\s*(\\d+%)\\s*,\\s*(\\d+%)\\s*,\\s*(\\d+%)(?:\\s*,\\s*(\\d+%|\\d*\\.\\d+|[01]))?\\s*\\)$/i;\r\nconst hexRegEx = /^#([\\da-f]{3,4}|[\\da-f]{6}|[\\da-f]{8})$/i;\r\n\r\n/**\r\n * @param {string} s Color component as number or percentage.\r\n * @param {number} divider Divider for percentage.\r\n * @return {number} Color component.\r\n */\r\nfunction toColorComponent(s, divider) {\r\n  return s.endsWith('%')\r\n    ? Number(s.substring(0, s.length - 1)) / divider\r\n    : Number(s);\r\n}\r\n\r\n/**\r\n * @param {string} color Color string.\r\n */\r\nfunction throwInvalidColor(color) {\r\n  throw new Error('failed to parse \"' + color + '\" as color');\r\n}\r\n\r\n/**\r\n * @param {string} color Color string.\r\n * @return {Color} RGBa color array.\r\n */\r\nfunction parseRgba(color) {\r\n  // Fast lane for rgb(a) colors\r\n  if (color.toLowerCase().startsWith('rgb')) {\r\n    const rgb =\r\n      color.match(rgbLegacyAbsoluteRegEx) ||\r\n      color.match(rgbModernRegEx) ||\r\n      color.match(rgbLegacyPercentageRegEx);\r\n    if (rgb) {\r\n      const alpha = rgb[4];\r\n      const rgbDivider = 100 / 255;\r\n      return [\r\n        clamp((toColorComponent(rgb[1], rgbDivider) + 0.5) | 0, 0, 255),\r\n        clamp((toColorComponent(rgb[2], rgbDivider) + 0.5) | 0, 0, 255),\r\n        clamp((toColorComponent(rgb[3], rgbDivider) + 0.5) | 0, 0, 255),\r\n        alpha !== undefined ? clamp(toColorComponent(alpha, 100), 0, 1) : 1,\r\n      ];\r\n    }\r\n    throwInvalidColor(color);\r\n  }\r\n  // Fast lane for hex colors (also with alpha)\r\n  if (color.startsWith('#')) {\r\n    if (hexRegEx.test(color)) {\r\n      const hex = color.substring(1);\r\n      const step = hex.length <= 4 ? 1 : 2;\r\n      const colorFromHex = [0, 0, 0, 255];\r\n      for (let i = 0, ii = hex.length; i < ii; i += step) {\r\n        let colorComponent = parseInt(hex.substring(i, i + step), 16);\r\n        if (step === 1) {\r\n          colorComponent += colorComponent << 4;\r\n        }\r\n        colorFromHex[i / step] = colorComponent;\r\n      }\r\n      colorFromHex[3] = colorFromHex[3] / 255;\r\n      return colorFromHex;\r\n    }\r\n    throwInvalidColor(color);\r\n  }\r\n  // Use canvas color serialization to parse the color into hex or rgba\r\n  // See https://www.w3.org/TR/2021/SPSD-2dcontext-20210128/#serialization-of-a-color\r\n  const context = getColorParseContext();\r\n  context.fillStyle = '#abcdef';\r\n  let invalidCheckFillStyle = context.fillStyle;\r\n  context.fillStyle = color;\r\n  if (context.fillStyle === invalidCheckFillStyle) {\r\n    context.fillStyle = '#fedcba';\r\n    invalidCheckFillStyle = context.fillStyle;\r\n    context.fillStyle = color;\r\n    if (context.fillStyle === invalidCheckFillStyle) {\r\n      throwInvalidColor(color);\r\n    }\r\n  }\r\n  const colorString = context.fillStyle;\r\n  if (colorString.startsWith('#') || colorString.startsWith('rgba')) {\r\n    return parseRgba(colorString);\r\n  }\r\n  context.clearRect(0, 0, 1, 1);\r\n  context.fillRect(0, 0, 1, 1);\r\n  const colorFromImage = Array.from(context.getImageData(0, 0, 1, 1).data);\r\n  colorFromImage[3] = toFixed(colorFromImage[3] / 255, 3);\r\n  return colorFromImage;\r\n}\r\n\r\n/**\r\n * Return the color as an rgba string.\r\n * @param {Color|string} color Color.\r\n * @return {string} Rgba string.\r\n * @api\r\n */\r\nexport function asString(color) {\r\n  if (typeof color === 'string') {\r\n    return color;\r\n  }\r\n  return toString(color);\r\n}\r\n\r\n/**\r\n * @type {number}\r\n */\r\nconst MAX_CACHE_SIZE = 1024;\r\n\r\n/**\r\n * We maintain a small cache of parsed strings.  Whenever the cache grows too large,\r\n * we delete an arbitrary set of the entries.\r\n *\r\n * @type {Object<string, Color>}\r\n */\r\nconst cache = {};\r\n\r\n/**\r\n * @type {number}\r\n */\r\nlet cacheSize = 0;\r\n\r\n/**\r\n * @param {Color} color A color that may or may not have an alpha channel.\r\n * @return {Color} The input color with an alpha channel.  If the input color has\r\n * an alpha channel, the input color will be returned unchanged.  Otherwise, a new\r\n * array will be returned with the input color and an alpha channel of 1.\r\n */\r\nexport function withAlpha(color) {\r\n  if (color.length === 4) {\r\n    return color;\r\n  }\r\n  const output = color.slice();\r\n  output[3] = 1;\r\n  return output;\r\n}\r\n\r\n// The functions b1, b2, a1, a2, rgbaToLcha and lchaToRgba below are adapted from\r\n// https://stackoverflow.com/a/67219995/2389327\r\n\r\n/**\r\n * @param {number} v Input value.\r\n * @return {number} Output value.\r\n */\r\nfunction b1(v) {\r\n  return v > 0.0031308 ? Math.pow(v, 1 / 2.4) * 269.025 - 14.025 : v * 3294.6;\r\n}\r\n\r\n/**\r\n * @param {number} v Input value.\r\n * @return {number} Output value.\r\n */\r\nfunction b2(v) {\r\n  return v > 0.2068965 ? Math.pow(v, 3) : (v - 4 / 29) * (108 / 841);\r\n}\r\n\r\n/**\r\n * @param {number} v Input value.\r\n * @return {number} Output value.\r\n */\r\nfunction a1(v) {\r\n  return v > 10.314724 ? Math.pow((v + 14.025) / 269.025, 2.4) : v / 3294.6;\r\n}\r\n\r\n/**\r\n * @param {number} v Input value.\r\n * @return {number} Output value.\r\n */\r\nfunction a2(v) {\r\n  return v > 0.0088564 ? Math.pow(v, 1 / 3) : v / (108 / 841) + 4 / 29;\r\n}\r\n\r\n/**\r\n * @param {Color} color RGBA color.\r\n * @return {Color} LCHuv color with alpha.\r\n */\r\nexport function rgbaToLcha(color) {\r\n  const r = a1(color[0]);\r\n  const g = a1(color[1]);\r\n  const b = a1(color[2]);\r\n  const y = a2(r * 0.222488403 + g * 0.716873169 + b * 0.06060791);\r\n  const l = 500 * (a2(r * 0.452247074 + g * 0.399439023 + b * 0.148375274) - y);\r\n  const q = 200 * (y - a2(r * 0.016863605 + g * 0.117638439 + b * 0.865350722));\r\n  const h = Math.atan2(q, l) * (180 / Math.PI);\r\n  return [\r\n    116 * y - 16,\r\n    Math.sqrt(l * l + q * q),\r\n    h < 0 ? h + 360 : h,\r\n    color[3],\r\n  ];\r\n}\r\n\r\n/**\r\n * @param {Color} color LCHuv color with alpha.\r\n * @return {Color} RGBA color.\r\n */\r\nexport function lchaToRgba(color) {\r\n  const l = (color[0] + 16) / 116;\r\n  const c = color[1];\r\n  const h = (color[2] * Math.PI) / 180;\r\n  const y = b2(l);\r\n  const x = b2(l + (c / 500) * Math.cos(h));\r\n  const z = b2(l - (c / 200) * Math.sin(h));\r\n  const r = b1(x * 3.021973625 - y * 1.617392459 - z * 0.404875592);\r\n  const g = b1(x * -0.943766287 + y * 1.916279586 + z * 0.027607165);\r\n  const b = b1(x * 0.069407491 - y * 0.22898585 + z * 1.159737864);\r\n  return [\r\n    clamp((r + 0.5) | 0, 0, 255),\r\n    clamp((g + 0.5) | 0, 0, 255),\r\n    clamp((b + 0.5) | 0, 0, 255),\r\n    color[3],\r\n  ];\r\n}\r\n\r\n/**\r\n * @param {string} s String.\r\n * @return {Color} Color.\r\n */\r\nexport function fromString(s) {\r\n  if (s === 'none') {\r\n    return NO_COLOR;\r\n  }\r\n  if (cache.hasOwnProperty(s)) {\r\n    return cache[s];\r\n  }\r\n  if (cacheSize >= MAX_CACHE_SIZE) {\r\n    let i = 0;\r\n    for (const key in cache) {\r\n      if ((i++ & 3) === 0) {\r\n        delete cache[key];\r\n        --cacheSize;\r\n      }\r\n    }\r\n  }\r\n\r\n  const color = parseRgba(s);\r\n  if (color.length !== 4) {\r\n    throwInvalidColor(s);\r\n  }\r\n  for (const c of color) {\r\n    if (isNaN(c)) {\r\n      throwInvalidColor(s);\r\n    }\r\n  }\r\n  cache[s] = color;\r\n  ++cacheSize;\r\n  return color;\r\n}\r\n\r\n/**\r\n * Return the color as an array. This function maintains a cache of calculated\r\n * arrays which means the result should not be modified.\r\n * @param {Color|string} color Color.\r\n * @return {Color} Color.\r\n * @api\r\n */\r\nexport function asArray(color) {\r\n  if (Array.isArray(color)) {\r\n    return color;\r\n  }\r\n  return fromString(color);\r\n}\r\n\r\n/**\r\n * @param {Color} color Color.\r\n * @return {string} String.\r\n */\r\nexport function toString(color) {\r\n  let r = color[0];\r\n  if (r != (r | 0)) {\r\n    r = (r + 0.5) | 0;\r\n  }\r\n  let g = color[1];\r\n  if (g != (g | 0)) {\r\n    g = (g + 0.5) | 0;\r\n  }\r\n  let b = color[2];\r\n  if (b != (b | 0)) {\r\n    b = (b + 0.5) | 0;\r\n  }\r\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 1000) / 1000;\r\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n}\r\n\r\n/**\r\n * @param {string} s String.\r\n * @return {boolean} Whether the string is actually a valid color\r\n */\r\nexport function isStringColor(s) {\r\n  try {\r\n    fromString(s);\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n", "/**\r\n * @module ol/size\r\n */\r\n\r\n/**\r\n * An array of numbers representing a size: `[width, height]`.\r\n * @typedef {Array<number>} Size\r\n * @api\r\n */\r\n\r\n/**\r\n * Returns a buffered size.\r\n * @param {Size} size Size.\r\n * @param {number} num The amount by which to buffer.\r\n * @param {Size} [dest] Optional reusable size array.\r\n * @return {Size} The buffered size.\r\n */\r\nexport function buffer(size, num, dest) {\r\n  if (dest === undefined) {\r\n    dest = [0, 0];\r\n  }\r\n  dest[0] = size[0] + 2 * num;\r\n  dest[1] = size[1] + 2 * num;\r\n  return dest;\r\n}\r\n\r\n/**\r\n * Determines if a size has a positive area.\r\n * @param {Size} size The size to test.\r\n * @return {boolean} The size has a positive area.\r\n */\r\nexport function hasArea(size) {\r\n  return size[0] > 0 && size[1] > 0;\r\n}\r\n\r\n/**\r\n * Returns a size scaled by a ratio. The result will be an array of integers.\r\n * @param {Size} size Size.\r\n * @param {number} ratio Ratio.\r\n * @param {Size} [dest] Optional reusable size array.\r\n * @return {Size} The scaled size.\r\n */\r\nexport function scale(size, ratio, dest) {\r\n  if (dest === undefined) {\r\n    dest = [0, 0];\r\n  }\r\n  dest[0] = (size[0] * ratio + 0.5) | 0;\r\n  dest[1] = (size[1] * ratio + 0.5) | 0;\r\n  return dest;\r\n}\r\n\r\n/**\r\n * Returns an `Size` array for the passed in number (meaning: square) or\r\n * `Size` array.\r\n * (meaning: non-square),\r\n * @param {number|Size} size Width and height.\r\n * @param {Size} [dest] Optional reusable size array.\r\n * @return {Size} Size.\r\n * @api\r\n */\r\nexport function toSize(size, dest) {\r\n  if (Array.isArray(size)) {\r\n    return size;\r\n  }\r\n  if (dest === undefined) {\r\n    dest = [size, size];\r\n  } else {\r\n    dest[0] = size;\r\n    dest[1] = size;\r\n  }\r\n  return dest;\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
